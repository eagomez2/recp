{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to recp","text":"<p><code>recp</code> (short for recipe) is a tool designed to automate processes that involve executing multiple sequential command-line steps. A recipe is defined in a <code>.yaml</code> file, which outlines the steps to be performed. Each step can include a tags, description, a set of environment variables to be set for that step, and one or more commands to be executed. Additionally, commands can be preprocessed, allowing a single instruction to be expanded into multiple commands, thereby eliminating the need for tedious repeated and error-prone manual steps or scripts lacking flexibility.</p> <p>A single recipe <code>.yaml</code> file can define multiple steps, which can be selected or filtered based on the task at hand. This flexibility allows you to execute only a subset of a larger recipe when needed. The <code>--dry-run</code> option enables generating the commands without actually running them, allowing you to verify that everything works as expected before executing time-consuming processes.</p>"},{"location":"#guides","title":"Guides","text":"<p>To begin using <code>recp</code>, refer to the guides below:</p> <ul> <li>Installation</li> <li>Quickstart</li> </ul> <p>For a more detailed description of individual features, see the Reference section.</p>"},{"location":"install/","title":"Installation","text":""},{"location":"install/#install-using-pip","title":"Install using pip","text":"<p>The easiest way to install <code>recp</code> is through <code>pip</code> by running:</p> <pre><code>pip install recp\n</code></pre> <p>After installing <code>recp</code> you can verify the installation by running:</p> <pre><code>recp --version\n</code></pre> <p>This should output:</p> <pre><code>recp version x.y.z yyyy-zzzz developed by Esteban G\u00f3mez (Speech Interaction Technology, Aalto University)\n</code></pre> <p>Where:</p> <ul> <li><code>x.y.z</code> represents the major, minor, and patch version.</li> <li><code>yyyy-zzzz</code> indicates the development start year and the current year.</li> </ul>"},{"location":"install/#install-using-uv","title":"Install using uv","text":"<p><code>uv</code> is a modern python package manager. You can see more details about <code>uv</code> in the official documentation.</p> <p>First, you need to install <code>uv</code> and <code>uvx</code> following the instructions for your operating system in <code>uv</code> website.</p> <p>Then run:</p> <pre><code>uv tool install recp\n</code></pre> <p>You can verify the installation running:</p> <pre><code>uv tool run recp --version\n</code></pre> <p>or you can use the shortcut version <code>uvx</code>:</p> <pre><code>uvx recp --version\n</code></pre> <p>This should output:</p> <pre><code>recp version x.y.z yyyy-zzzz developed by Esteban G\u00f3mez (Speech Interaction Technology, Aalto University)\n</code></pre> <p>Where:</p> <ul> <li><code>x.y.z</code> represents the major, minor, and patch version.</li> <li><code>yyyy-zzzz</code> indicates the development start year and the current year.</li> </ul>"},{"location":"install/#whats-next","title":"What's next","text":"<p>Now that you have installed <code>recp</code>, check the Quickstart section to begin using it.</p>"},{"location":"license/","title":"License","text":"<p><code>recp</code> was developed by Esteban G\u00f3mez, part of the Speech Interaction Technology group from Aalto University and is licensed under CC BY-SA 4.0.</p> <p>If this package contributed to your work, please consider citing it:</p> <pre><code>@misc{recp,\n  author = {Esteban G\u00f3mez},\n  title  = {recp},\n  year   = 2026,\n  url    = {https://github.com/eagomez2/recp}\n}\n</code></pre>"},{"location":"quickstart/","title":"Quickstart","text":"<p>If you haven't installed <code>recp</code> yet, please refer to our Installation guide before proceeding. This guide will help you get up and running with <code>recp</code>.</p>"},{"location":"quickstart/#minimal-recipe","title":"Minimal recipe","text":"<p><code>recp</code> works by parsing a recipe file file describing the steps you want to run. A recip file is a <code>.yaml</code> file with a defined structure. A minimal example is shown below:</p> minimal.yaml<pre><code>recipe:\n  first_step:\n    run:\n      - echo \"Hello, recp!\"\n\n  second_step:\n    run:\n      - python -c \"from datetime import datetime; print('The current year is', datetime.now().year)\"\n</code></pre> <p>In this example:</p> <ul> <li><code>recipe</code> is the root key specifying your recipe.</li> <li><code>first_step</code> and <code>second_step</code> are the steps of your recipe <code>.yaml</code> file. A recipe file can contain multilpe steps.</li> <li><code>run</code> is the key specifying what commands are run for each step. A single step can have multiple commands.</li> </ul> <p>To run this recipe, save it as <code>minimal.yaml</code> and run it as follows: <pre><code>recp run /path/to/your/recipe/minimal.yaml\n</code></pre></p> <p>If you run it, you should see the following output: <pre><code>Using recipe '/path/to/your/recipe/minimal.yaml' ...\n2 step(s) found\nPre-processing recipe data ...\nRecipe pre-processing successfully completed\nParsing step environments ...\nStep environments processing successfully completed\nPre-processing recipe commands ...\nRecipe commands successfully completed\nRunning commands ...\n[1/2] Running step 'first_step' ...\n      Command:     echo \"Hello, recp!\"\nHello, recp!\n[2/2] Running step 'second_step' ...\n      Command:     python -c \"from datetime import datetime; print('The current year is', datetime.now().year)\"\nThe current year is 2026\n</code></pre></p> <p>This output shows how your recipe file was parsed and then run step by step. So far it looks like a <code>.sh</code> would suffice to do this with less verbosity. However, <code>recp</code> offer many more options that make it stand out and be useful for automating more complex flows comprised of multiple steps.</p>"},{"location":"quickstart/#additional-features","title":"Additional features","text":"<p>Let's take our example one step further by adding some additional instructions to our <code>.yaml</code> recipe file:</p> minimal.yaml<pre><code>minimum_required_version: 0.1.0\n\nrecipe:\n  first_step:\n      env:\n        YOUR_NAME: !input\n          name: MY_NAME\n          default: Juhani\n      run:\n        - echo \"Hello, my name is $YOUR_NAME\"\n\n  second_step:\n      run:\n        - cmd: echo \"The current year is {YEAR}\"\n          apply:\n            - fn: date\n              args:\n                token: \"{YEAR}\"\n                format: \"%Y\"\n</code></pre> <p>Here we can observe a few new features being introduced:</p> <ul> <li> <p><code>first_step</code> now has an <code>env</code> key. This lets you define environment variables for that step. We define <code>YOUR_NAME</code>, which reads from the <code>MY_NAME</code> environment variable. If <code>MY_NAME</code> is not set, <code>YOUR_NAME</code> defaults to <code>Juhani</code>. The <code>!input</code> directive allows capturing this variable from the terminal when the recipe is run using <code>recp</code>.  In the <code>run</code> section, we use this variable as <code>$YOUR_NAME</code>. This shows how to capture and use environment variables.</p> </li> <li> <p><code>second_step</code> now has an expanded command in the <code>run</code> key. The command is modified using the <code>apply</code> key. Modifiers are functions that take the command in <code>cmd</code> and process it to produce one or more new commands. There are many built-in modifiers, and you can also create your own. This lets you generate multiple commands automatically without writing each one manually</p> </li> <li> <p>There is a top level <code>minimum_required_version</code> that you can use to prevent running your recipes with outdated <code>recp</code> versions.</p> </li> </ul> <p>To run this recipe, update your previous <code>minimal.yaml</code> file, and run it as follows: <pre><code>MY_NAME=\"Olavi\" recp run /path/to/your/recipe/minimal.yaml\n</code></pre></p> <p>You should see the following output: <pre><code>Using recipe '/path/to/your/recipe/minimal.yaml' ...\n2 step(s) found\nPre-processing recipe data ...\nRecipe pre-processing successfully completed\nParsing step environments ...\nStep environments processing successfully completed\nPre-processing recipe commands ...\nRecipe commands successfully completed\nRunning commands ...\n[1/2] Running step 'first_step' ...\n      Command:     echo \"Hello, my name is Olavi\"\nHello, my name is Olavi\n[2/2] Running step 'second_step' ...\n      Command:     echo \"The current year is 2026\"\nThe current year is 2026\n</code></pre></p> <p>Here you can see that both steps run correctly and show the expected values. The environment variable <code>MY_NAME</code> and the date modifier are both replaced as intended. If <code>MY_NAME</code> is not set, the default value <code>Juhani</code> is used.</p> <p>This is just a small glimpse of what <code>recp</code> can do. For further details about the sturcture of a <code>.yaml</code> recipe and the available modifiers, please go to the Reference section.</p>"},{"location":"reference/","title":"Reference","text":""},{"location":"reference/#recipe-structure","title":"Recipe structure","text":"<p>A recipe file with all available fields is shown below. Each field is described afterward.</p> <p>recipe.yaml with all available fields<pre><code>minimum_required_version: 0.1.0\n\nrecipe:\n  first_step:\n    tag:\n      - first\n\n    description: &gt;\n        Description of the first step\n\n    env:\n        USER_NAME: !input\n            name: MY_NAME\n            default: Juhani\n            required: false \n\n    run:\n        - echo 'Hello from recp'\n        - cmd: echo \"My name is $USER_NAME and today is {DAY}\"\n          apply:\n            - fn: date\n              args:\n                token: \"{DAY}\"\n                format: \"%A\"\n</code></pre> A recipe file is a <code>.yaml</code> file where:</p> <ul> <li><code>minimum_required_version</code> is an optional field specifying the minimum <code>recp</code> version required to run it.</li> <li><code>recipe</code> is the required root key containing the description of each step to be run.</li> </ul> <p>Each step has:</p> <ul> <li>A required name key (<code>first_step</code>) containing the information relative to that particular step.</li> <li>An optional <code>tag</code> key containing a <code>list</code> of <code>str</code>, each one corresponding to a tag that can be use to select a certain subset of steps to be run with the <code>--tag</code> option.</li> <li>An optional <code>description</code> key containing a <code>str</code> that describes that the step does. This is only for documentation purposes, and will be printed to the terminal when the recipe is run.</li> <li>An optional <code>env</code> key containing environmental variables to be used in that step. The environmental variables of a specific step are isolated from all other steps. To share variable across steps you can use yaml anchors and aliases. Additionally, environmental variables can be defined directly in the <code>.yaml</code> file, or defined by the user when running the recipe. User defined variables can be configured using the <code>!input</code> constructor that has a mandatory <code>name</code> key, and an optional <code>default</code> key to define the default value, and an optional <code>required</code> key containing a <code>bool</code> value to specify whether that variable is required or optional.</li> <li>A required <code>run</code> key that contains a <code>list</code> of the commands to be run. A command can be a <code>str</code> or a <code>dict</code> containing the <code>cmd</code> key and the <code>apply</code> key containing a <code>list</code> of modifiers to be applied to that command as a pre-processing step to generate one or multiple commands. Each modifier is defined by a <code>fn</code> key with the modifier function name, and an <code>args</code> key with the corresponding arguments.</li> </ul> <p>A recipe can be run using: <pre><code>recp run /path/to/your/recipe.yaml\n</code></pre></p> <p>Additionally, you can show the commands without running them with the <code>--dry-run</code> option, that can be used for debugging purposes.</p> <pre><code>recp run /path/to/your/recipe.yaml --dry-run \n</code></pre> <p>To filter steps by tag, you can use: <pre><code>recp run /path/to/your/recipe.yaml --tag first \n</code></pre></p> <p>This will only collect steps containing the tag <code>first</code>. Multiple tags can be used to filter a step, in which case only steps containing all of them will be selected. </p> <p>For further options on <code>recp run</code>, you can run: <pre><code>recp run --help\n</code></pre></p>"},{"location":"reference/#constructors","title":"Constructors","text":"<p>A recipe <code>.yaml</code> file can be created using a certain set of custom constructors to facilitate expressing your commands.</p>"},{"location":"reference/#input-constructor","title":"!input constructor","text":"<p>The <code>!input</code> constructor allows you to introduce user variables provided through the terminal into your recipe. It is typically used in the <code>env</code> key as exemplified below.</p> input_constructor_example.yaml<pre><code>minimum_required_version: 0.1.0\n\nrecipe:\n  step:\n    env:\n      USER_VAR: !input\n        name: USER_VAR\n        default: default_value\n        required: false\n    run:\n      - \"echo 'print user variable: $USER_VAR'\"\n</code></pre> <p>In this case:</p> <ul> <li><code>name</code> is a required key with the name of the environmental variable to be provided by the user. This name can be the same as its parent key or different.</li> <li><code>default</code> is an optional key. It sets the value to use if the user does not provide the variable.</li> <li><code>required</code> is an optional key. If <code>true</code>, the user must provide the variable to run the recipe.</li> </ul> <p>The recipe can be run as: <pre><code>USER_VAR=\"Juhani\" recp run /path/to/input_constructor_example.yaml\n</code></pre></p> <p>It will result in the following output: <pre><code>Using recipe '/path/to/input_constructor_example.yaml' ...\n1 step(s) found\nPre-processing recipe data ...\nRecipe pre-processing successfully completed\nParsing step environments ...\nStep environments processing successfully completed\nPre-processing recipe commands ...\nRecipe commands successfully completed\nRunning commands ...\n[1/1] Running step 'step' ...\n      Command:     echo 'print user variable: Juhani'\nprint user variable: Juhani\n</code></pre></p>"},{"location":"reference/#expr-constructor","title":"!expr constructor","text":"<p>The <code>!expr</code> constructor allows using <code>python</code> expressions to be evaluated at runtime.</p> <p>Warning</p> <p>This constructor uses <code>eval()</code> internally and is considered unsafe. By default, it is disabled, but you can enable it by using the <code>--unsafe</code> option when running the recipe.</p> <p>This constructor can be used in any part of your recipe as follows:</p> expr_constructor_example.yaml<pre><code>minimum_required_version: 0.1.0\n\nrecipe:\n  step:\n    env:\n      RESULT: !expr 24 * 60 * 60\n    run:\n      - echo 'A day has $RESULT seconds'\n</code></pre> <p>To run this recipe and enable the <code>!expr</code> constructor, you must use the <code>--unsafe</code> option as follows:</p> <pre><code>recp run /path/to/expr_constructor_example.yaml --unsafe\n</code></pre> <p>It will result in the following output: <pre><code>Using recipe '/path/to/expr_constructor_example.yaml' ...\n1 step(s) found\nPre-processing recipe data ...\nRecipe pre-processing successfully completed\nParsing step environments ...\nStep environments processing successfully completed\nPre-processing recipe commands ...\nRecipe commands successfully completed\nRunning commands ...\n[1/1] Running step 'step' ...\n      Command:     echo 'A day has 86400 seconds'\nA day has 86400 seconds\n</code></pre></p>"},{"location":"reference/#modifiers","title":"Modifiers","text":"<p>Modifiers are functions that take a command as input and transform it into one or more commands according to some logic. They can be used to write more compact recipes and to add variation or dynamic behavior to your commands.</p> <p>To use a modifier, you can include then in the <code>run</code> key as follows: modifier_example.yaml<pre><code>minimum_required_version: 0.1.0\n\nrecipe:\n  step:\n    run:\n      - cmd: echo 'This message will be repeated multiple times'\n        apply:\n          - fn: repeat\n            args:\n              n: 3\n</code></pre> In this case:</p> <ul> <li>The command in the <code>run</code> key is now a <code>dict</code>.</li> <li>The <code>apply</code> key contains all modifiers to be applied. It is a <code>list</code> where each item is a <code>dict</code> with a <code>fn</code> key (the modifier function) and an <code>args</code> key (the arguments passed to the modifier).</li> <li>When multiple modifiers are defined, they are applied sequentially: the output of one modifier becomes the input to the next.</li> </ul> <p>In this example, the <code>repeat</code> modifier will be applied to the command, causing it to be run multiple times, resulting in:</p> <pre><code>Using recipe '/path/to/modifier_example.yaml' ...\n1 step(s) found\nPre-processing recipe data ...\nRecipe pre-processing successfully completed\nParsing step environments ...\nStep environments processing successfully completed\nPre-processing recipe commands ...\nRecipe commands successfully completed\nRunning commands ...\n[1/1] Running step 'step' ...\n      Command:     echo 'This message will be repeated multiple times'\nThis message will be repeated multiple times\n      Command:     echo 'This message will be repeated multiple times'\nThis message will be repeated multiple times\n      Command:     echo 'This message will be repeated multiple times'\nThis message will be repeated multiple times\n</code></pre> <p>Info</p> <p>The commands are unwrapped before being run, thus, you can use <code>--dry-run</code> the preview the commands that will be run after all modifiers are applied.</p> <p>A list of supported modifiers is provided below. You can also implement your own by adding it to the <code>src/recp/utils/apply.py</code> file.</p>"},{"location":"reference/#date","title":"date","text":"<p>Replaces a token by a date in a specific format.</p> Name Type Description Default <code>token</code> <code>str</code> Token to be replaced. <code>format</code> <code>str</code> Date format using <code>datetime</code> convention. <code>%Y-%m-%d</code> <p>Example: <pre><code>recipe:\n  step:\n    run:\n      - cmd: echo 'Today is __DATE__'\n        apply:\n          - fn: date\n            args:\n              token: __DATE__\n              format: \"%Y-%m-%d\"\n</code></pre></p> <p>Result: <pre><code>Today is 2026-01-06\n</code></pre></p>"},{"location":"reference/#dir_files","title":"dir_files","text":"<p>Expands a command creating one copy per file in a given folder.</p> Name Type Description Default <code>token</code> <code>str</code> Token to be replaced. <code>dir</code> <code>str</code> Input folder. <code>ext</code> <code>str | List[str]</code> Extension(s) to filter (<code>*</code> includes all extensions). <code>*</code> <code>recursive</code> <code>str</code> If <code>True</code>, <code>dir</code> is searched recursively. <p>Example: <pre><code>recipe:\n  step:\n    env:\n      DIR: &amp;dir /path/to/my/dir\n    run:\n      - cmd: echo '$DIR contains file __FILE__'\n        apply:\n          - fn: dir_files\n            args:\n              token: __FILE__\n              dir: *dir\n</code></pre></p> <p>Result: <pre><code>/path/to/my/dir contains file /path/to/my/dir/00_file.yaml\n/path/to/my/dir contains file /path/to/my/dir/01_file.yaml\n...\n</code></pre></p>"},{"location":"reference/#index","title":"index","text":"<p>Replaces a token by the command index value.</p> Name Type Description Default <code>token</code> <code>str</code> Token to replace. <code>offset</code> <code>int</code> Offset applied to all values. <code>0</code> <code>zfill</code> <code>int</code> Minimum width of the number, padded with leading zeros if needed. <code>0</code> <p>Example: <pre><code>recipe:\n  step:\n    run:\n      - cmd: echo 'Command number __INDEX__'\n        apply:\n          - fn: repeat\n            args:\n              n: 3\n          - fn: index\n            args:\n              token: __INDEX__\n              zfill: 2\n              offset: 1\n</code></pre></p> <p>Result: <pre><code>Command number 01\nCommand number 02\nCommand number 03\n</code></pre></p>"},{"location":"reference/#match","title":"match","text":"<p>Replaces a token value based on a matching value of a given variable.</p> Name Type Description <code>var</code> <code>str</code> Variable to match. <code>token</code> <code>str</code> Token to be replaced. <code>choices</code> <code>List[str]</code> List of choices. <code>values</code> <code>List[str]</code> List of values (correlative to <code>choices</code>). <p>Example: <pre><code>recipe:\n  step:\n    env:\n      CHOICE: &amp;choice second\n    run:\n      - cmd: echo 'The $CHOICE choice is __MATCH__'\n        apply:\n          - fn: match\n            args:\n              var: *choice\n              token: __MATCH__\n              choices: [\"first\", \"second\", \"third\"]\n              values: [\"bird\", \"cat\", \"dog\"]\n</code></pre></p> <p>Result: <pre><code>The second choice is cat\n</code></pre></p>"},{"location":"reference/#parent_dir","title":"parent_dir","text":"<p>Replaces a token by the path to the parent directory of a given path.</p> Name Type Description <code>token</code> <code>str</code> Token to be replaced. <code>path</code> <code>str</code> Path whose parent directory will be extracted. <p>Example: <pre><code>recipe:\n  step:\n    env:\n      DIR: &amp;dir /path/to/parent_dir/file.txt\n    run:\n      - cmd: echo 'The parent dir of $DIR is __PARENT_DIR__'\n        apply:\n          - fn: parent_dir\n            args:\n              token: __PARENT_DIR__\n              path: *dir\n</code></pre></p> <p>Result: <pre><code>The parent dir of /path/to/parent_dir/file.txt is /path/to/parent_dir\n</code></pre></p>"},{"location":"reference/#randchoice","title":"randchoice","text":"<p>Picks a random choice from a list.</p> Name Type Description <code>token</code> <code>str</code> Token to replace. <code>choices</code> <code>List[str]</code> List of <code>str</code> to choosen from. <code>seed</code> <code>int | None</code> Random seed. <p>Example: <pre><code>recipe:\n  step:\n    run:\n      - cmd: echo 'My pet is a __CHOICE__'\n        apply:\n          - fn: randchoice\n            args:\n              token: __CHOICE__\n              choices: [\"bird\", \"cat\", \"dog\"]\n</code></pre></p> <p>Result: <pre><code>My pet is a bird\n</code></pre></p>"},{"location":"reference/#randint","title":"randint","text":"<p>Generates a random integer between <code>min</code> (included) and <code>max</code> (included).</p> Name Type Description <code>token</code> <code>str</code> Token to replace. <code>min</code> <code>int</code> Minimum integer number to generate. <code>max</code> <code>int</code> Maximum integer number to generate. <code>seed</code> <code>int | None</code> Random seed. <p>Example: <pre><code>recipe:\n  step:\n    run:\n      - cmd: echo 'The lottery winner is the number __WINNER__'\n        apply:\n          - fn: randint\n            args:\n              token: __WINNER__\n              min: 0\n              max: 100\n</code></pre></p> <p>Result: <pre><code>The lottery winner is the number 90\n</code></pre></p>"},{"location":"reference/#randfloat","title":"randfloat","text":"<p>Generated a random float-point number within the <code>[min, max)</code> range.</p> Name Type Description <code>token</code> <code>str</code> Token to replace. <code>min</code> <code>int</code> Minimum floating-point number to generate (inclusive). <code>max</code> <code>int</code> Maximum floating-point number to generate (exclusive). <code>seed</code> <code>int | None</code> Random seed. <p>Example: <pre><code>recipe:\n  step:\n    run:\n      - cmd: echo 'The generated floating-point number is __FLOAT__'\n        apply:\n          - fn: randfloat\n            args:\n              token: __FLOAT__\n              min: 0.0\n              max: 1.0\n</code></pre></p> <p>Result: <pre><code>The generated floating-point number is 0.4770061600654977\n</code></pre></p>"},{"location":"reference/#replace","title":"replace","text":"<p>Replace one or multiple tokens by a given value.</p> Name Type Description <code>**kwargs</code> <code>str</code> Keyword arguments where each key is the a token and each value is the token value. <p>Example: <pre><code>recipe:\n  step:\n    run:\n      - cmd: echo 'The dog arrived first, and then the cat came'\n        apply:\n          - fn: replace\n            args:\n              dog: bird\n              cat: fish\n</code></pre></p> <p>Result: <pre><code>The bird arrived first, and then the fish came\n</code></pre></p>"},{"location":"reference/#repeat","title":"repeat","text":"<p>Repeats a command a given number of times.</p> Name Type Description <code>n</code> <code>int</code> Number of times to repeat the command. <p>Example: <pre><code>recipe:\n  step:\n    run:\n      - cmd: echo 'I tend to repeat myself'\n        apply:\n          - fn: repeat\n            args:\n              n: 3\n</code></pre></p> <p>Result: <pre><code>I tend to repeat myself\nI tend to repeat myself\nI tend to repeat myself\n</code></pre></p>"},{"location":"reference/#recipe-shortcuts","title":"Recipe shortcuts","text":"<p>You can store frequently used recipes in a folder that <code>recp</code> reads automatically, and then refer to a recipe just by its name.</p> <p>To add a new recipe shortcut this way, simply use: <pre><code>recp config --add /path/to/your/custom_recipe.yaml\n</code></pre></p> <p>Then this recipe can be run as: <pre><code>recp run custom_recipe\n</code></pre></p> <p>You can see the folder location and other <code>recp</code> settings by running: <pre><code>recp config\n</code></pre></p> <p>To change the default recipes folder you can use: <pre><code>recp config --set recipes.dir /path/to/your/new/recipes/folder\n</code></pre></p>"}]}